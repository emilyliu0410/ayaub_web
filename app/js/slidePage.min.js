"use strict";
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
    return typeof t
} : function(t) {
    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
};
"classList" in document.documentElement || Object.defineProperty(HTMLElement.prototype, "classList", {
        get: function() {
            var t = this;

            function e(e) {
                return function(i) {
                    var n = t.className.split(/\s+/g),
                        s = n.indexOf(i);
                    e(n, s, i), t.className = n.join(" ")
                }
            }
            return {
                add: e(function(t, e, i) {
                    ~e || t.push(i)
                }),
                remove: e(function(t, e) {
                    ~e && t.splice(e, 1)
                }),
                toggle: e(function(t, e, i) {
                    ~e ? t.splice(e, 1) : t.push(i)
                }),
                contains: function(e) {
                    return !!~t.className.split(/\s+/g).indexOf(e)
                },
                item: function(e) {
                    return t.className.split(/\s+/g)[e] || null
                }
            }
        }
    }),
    function(t, e) {
        "function" == typeof define && define.amd ? define([], function() {
            return e(t, t.document)
        }) : "object" === ("undefined" == typeof exports ? "undefined" : _typeof(exports)) ? module.exports = e(t, t.document) : t.slidePage = e(t, t.document)
    }("undefined" != typeof window ? window : void 0, function(t, e) {
        var i = !1;
        try {
            var n = Object.defineProperty({}, "passive", {
                get: function() {
                    i = !0
                }
            });
            t.addEventListener("test", null, n)
        } catch (t) {}
        var s = function(e) {
                var i = new RegExp("(^|&)" + e + "=([^&]*)(&|$)"),
                    n = t.location.search.substr(1).match(i);
                return null != n ? unescape(n[2]) : null
            },
            r = function(t, e) {
                for (var i in e) t[i] = e[i];
                return t
            },
            o = function(t, e) {
                var i = t.nodeName === e.nodeName,
                    n = t.nodeType === e.nodeType,
                    s = t.innerHTML === e.innerHTML;
                return t.className.replace(/ transition/g, "") === e.className.replace(/ transition/g, "") && i && n && s
            },
            a = function(t) {
                if (t instanceof NodeList || t instanceof HTMLCollection && t.length > 0) {
                    for (var e = 0, i = 0, n = t.length; i < n; i++) t[i] instanceof Element && e++;
                    return e === n
                }
                return t instanceof Element
            },
            l = {},
            h = (new Date).getTime(),
            c = {
                wheelFunc: function(e) {
                    e = e || t.event;
                    if (!this.isScroll) {
                        var i = (new Date).getTime(),
                            n = i - h;
                        h = i, n <= 50 || (e.wheelDeltaY < 0 || e.wheelDelta < 0 || e.detail > 0 ? this.canSlide && this.canNext && this.slideNext() : (e.wheelDeltaY > 0 || e.wheelDelta > 0 || e.detail < 0) && this.canSlide && this.canPrev && this.slidePrev())
                    }
                },
                touchStart: function(t) {
                    l.startpoint = t.targetTouches[0].clientY
                },
                touchMove: function(t) {
                    var e = t.targetTouches[0].clientY - l.startpoint;
                    !this.canPrev && e > 5 && (this.isScroll = !0), !this.canNext && e < -5 && (this.isScroll = !0), !this.isScroll && t.preventDefault(), l.endpoint = t.targetTouches[0].clientY
                },
                touchEnd: function(t) {
                    if (0 === l.endpoint) return !1;
                    l.endpoint - l.startpoint < -60 ? this.canSlide && this.canNext && this.slideNext() : l.endpoint - l.startpoint > 60 && this.canSlide && this.canPrev && this.slidePrev(), l.startpoint = 0, l.endpoint = 0
                },
                transitionEnd: function(t) {
                    t.target.isEqualNode(this.items[this.page - 1]) && ("next" == this.direction ? (this.opt.after(this.page - 1, this.direction, this.page), this.opt.refresh && u.resetAnimation.call(this, this.page - 2)) : "prev" == this.direction && (this.opt.after(this.page + 1, this.direction, this.page), this.opt.refresh && u.resetAnimation.call(this, this.page)), this.canSlide = !0)
                }
            },
            u = {
                slideScroll: function(e) {
                    var i = this.items[e].children[0].offsetHeight,
                        n = t.innerHeight,
                        s = function(e) {
                            var n = t.innerHeight,
                                s = i <= this.items[e].scrollTop + n,
                                r = 0 == this.items[e].scrollTop;
                            this.canPrev = r && !s, this.canNext = s && !r, this.isScroll = !(s || r)
                        }.bind(this);
                    i - n > 20 ? (this.items[e].children[0].children[0].focus(), s(e), "next" == this.direction ? this.items[e].scrollTop = 0 : "prev" == this.direction && (this.items[e].scrollTop = i - n), this.items[e].addEventListener("scroll", function(t) {
                        s(e)
                    })) : (this.canPrev = !0, this.canNext = !0, this.isScroll = !1)
                },
                resetAnimation: function(t) {
                    if (this.opt.useAnimation && this.opt.refresh) {
                        if (!this.items[t]) return !1;
                        var e = this.items[t].querySelectorAll(".step"),
                            i = this.items[t].querySelectorAll(".lazy");
                        if (e.length > 0) {
                            var n = !0,
                                s = !1,
                                r = void 0;
                            try {
                                for (var o, a = Array.from(e)[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
                                    o.value.style.display = "none"
                                }
                            } catch (t) {
                                s = !0, r = t
                            }
                        }
                        if (i.length > 0) {
                            var l = !0,
                                h = !1,
                                c = void 0;
                            try {
                                for (var u, d = Array.from(i)[Symbol.iterator](); !(l = (u = d.next()).done); l = !0) {
                                    u.value.style.display = "none"
                                }
                            } catch (t) {
                                h = !0, c = t
                            }
                        }
                    }
                },
                runAnimation: function(t, e) {
                    if (this.opt.useAnimation) {
                        var i = function(t) {
                                var e = t.getAttribute("data-delay") || 100,
                                    i = setTimeout(function() {
                                        t.style.display = "", clearTimeout(i)
                                    }, e)
                            },
                            n = this.items[t].querySelectorAll(e || ".step"),
                            s = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var a, l = Array.from(n)[Symbol.iterator](); !(s = (a = l.next()).done); s = !0) {
                                i(a.value)
                            }
                        } catch (t) {
                            r = !0, o = t
                        }
                    }
                },
                initAnimation: function(t, e) {
                    if (this.opt.useAnimation) {
                        var i = this.container.querySelectorAll(".step"),
                            n = this.container.querySelectorAll(".lazy");
                        if (i.length > 0) {
                            var s = !0,
                                r = !1,
                                o = void 0;
                            try {
                                for (var a, l = Array.from(i)[Symbol.iterator](); !(s = (a = l.next()).done); s = !0) {
                                    a.value.style.display = "none"
                                }
                            } catch (t) {
                                r = !0, o = t
                            }
                        }
                        if (n.length > 0) {
                            var h = !0,
                                c = !1,
                                d = void 0;
                            try {
                                for (var f, p = Array.from(n)[Symbol.iterator](); !(h = (f = p.next()).done); h = !0) {
                                    f.value.style.display = "none"
                                }
                            } catch (t) {
                                c = !0, d = t
                            }
                        }
                        u.runAnimation.call(this, e)
                    }
                    for (var v, m = 0; v = this.items[m]; m++) m === e ? v.style.transform = "translate3d(0, 0, 0)" : m < e ? v.style.transform = "translate3d(0, -100%, 0)" : m > e && (v.style.transform = "translate3d(0, 100%, 0)"),
                        function(t) {
                            var e = setTimeout(function() {
                                t.classList && t.classList.add instanceof Function && t.classList.add("transition"), clearTimeout(e)
                            })
                        }(v)
                },
                initEvent: function() {
                    this.opt.useWheel && (e.addEventListener("DOMMouseScroll", this.eventHandler.wheelFunc, !!i && {
                        passive: !0
                    }), e.addEventListener("mousewheel", this.eventHandler.wheelFunc, !!i && {
                        passive: !0
                    })), this.opt.useSwipe && (l = {
                        startpoint: 0,
                        endpoint: 0
                    }, this.container.addEventListener("touchstart", this.eventHandler.touchStart, !!i && {
                        passive: !0
                    }), this.container.addEventListener("touchmove", this.eventHandler.touchMove), this.container.addEventListener("touchend", this.eventHandler.touchEnd, !!i && {
                        passive: !0
                    })), this.container.addEventListener("transitionend", this.eventHandler.transitionEnd)
                }
            },
            d = function(t) {
                var i = {
                    page: 1 * s("page") || 1,
                    slidePages: ".slide-page",
                    slideContainer: ".slide-container",
                    after: function() {},
                    before: function() {},
                    refresh: !1,
                    useWheel: !0,
                    useSwipe: !0,
                    useAnimation: !0
                };
                this.canSlide = !0, this.canNext = !0, this.canPrev = !0, this.isScroll = !1, this.opt = r(i, t), this.page = this.opt.page, this.container = a(this.opt.slideContainer) ? this.opt.slideContainer : e.querySelector(this.opt.slideContainer), this.items = a(this.opt.slidePages) ? this.opt.slidePages : e.querySelectorAll(this.opt.slidePages), this.count = this.items.length, this.direction = "", this.eventHandler = {};
                for (var n in c) this.eventHandler[n] = c[n].bind(this);
                u.initEvent.call(this), u.slideScroll.call(this, this.page - 1), u.initAnimation.call(this, this.items, this.page - 1), this.slideTo(this.page)
            };
        return d.prototype.slideNext = function(t) {
            if (this.count <= this.page) return !1;
            this.direction = "next", u.slideScroll.call(this, this.page), this.items[this.page - 1].style.transform = "translate3d(0, -100%, 0)", this.items[this.page].style.transform = "translate3d(0, 0, 0)", this.page++, this.opt.before(this.page - 1, this.direction, this.page), t || (this.canSlide = !1, u.runAnimation.call(this, this.page - 1))
        }, d.prototype.slidePrev = function(t) {
            if (1 >= this.page) return !1;
            this.direction = "prev", u.slideScroll.call(this, this.page - 2), this.items[this.page - 2].style.transform = "translate3d(0, 0, 0)", this.items[this.page - 1].style.transform = "translate3d(0, 100%, 0)", this.page--, this.opt.before(this.page + 1, this.direction, this.page), t || (this.canSlide = !1, u.runAnimation.call(this, this.page - 1))
        }, d.prototype.slideTo = function(t) {
            if (t >= 1 && t <= this.count) {
                if (t == this.page) return !1;
                if (t > this.page) {
                    for (var e = this.page + 1; e < t; e++) this.slideNext("optimize");
                    this.slideNext()
                } else if (t < this.page) {
                    for (e = this.page - 1; e > t; e--) this.slidePrev("optimize");
                    this.slidePrev()
                }
            }
        }, d.prototype.slideFire = function(t) {
            var e = t ? t - 1 : this.page - 1;
            u.runAnimation.call(this, e, ".lazy")
        }, d.prototype.destroy = function() {
            if (this.opt.useAnimation) {
                this.items.length;
                var t = this.container.querySelectorAll(".step"),
                    i = this.container.querySelectorAll(".lazy");
                if (t.length > 0) {
                    var n = !0,
                        s = !1,
                        r = void 0;
                    try {
                        for (var o, a = t[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
                            o.value.style.display = ""
                        }
                    } catch (t) {
                        s = !0, r = t
                    }
                }
                if (i.length > 0) {
                    var l = !0,
                        h = !1,
                        c = void 0;
                    try {
                        for (var d, f = i[Symbol.iterator](); !(l = (d = f.next()).done); l = !0) {
                            d.value.style.display = ""
                        }
                    } catch (t) {
                        h = !0, c = t
                    }
                }
                u.runAnimation.call(this, 0)
            }
            if (this.opt.useWheel && (e.removeEventListener("DOMMouseScroll", this.eventHandler.wheelFunc), e.removeEventListener("mousewheel", this.eventHandler.wheelFunc), this.items[this.page - 1].style.transform = "translate3d(0, 0, 0)"), this.opt.useSwipe) {
                this.container.removeEventListener("touchstart", this.eventHandler.touchStart), this.container.removeEventListener("touchmove", this.eventHandler.touchMove), this.container.removeEventListener("touchend", this.eventHandler.touchEnd)
            }
            this.container.removeEventListener("transitionend", this.eventHandler.transitionEnd)
        }, d.prototype.update = function(t) {
            this.canSlide = !0, this.canNext = !0, this.canPrev = !0;
            for (var i = a(t) ? t : e.querySelectorAll(this.opt.slidePages), n = 0, s = i.length; n < s; n++) {
                if (this.items[this.page - 1] && o(this.items[this.page - 1], i[n])) {
                    this.page = n + 1;
                    break
                }
                n === s - 1 && (this.page = 1)
            }
            this.items = i, this.count = this.items.length, this.slideTo(this.page), u.initAnimation.call(this, this.items, this.page - 1)
        }, d
    });